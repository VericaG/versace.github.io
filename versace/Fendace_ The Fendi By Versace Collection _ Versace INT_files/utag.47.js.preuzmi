//tealium universal tag - utag.47 ut4.0.202306130745, Copyright 2023 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;u.ev={"view":1,"link":1,"ga4_event":1};u.map={"ut.event:view":"page_view","event_name:newsletter_light":"newsletter_light","event_name:newsletter_complete":"newsletter_complete","event_name:cart_step1":"begin_checkout","event_name:cart_global-e-checkout":"begin_checkout","event_name:cart_view":"view_cart","event_name:store_locator_direction":"store_locator_direction","event_name:store_locator_phone":"store_locator_phone","event_name:augmented_reality":"augmented_reality","event_name:Pay Now":"pay_now","event_name:contact us":"contact us","event_name:newsletter_popup":"newsletter_popup","event_name:wishlist_share":"share","event_name:filter":"filter","event_name:category_menu":"category_menu","event_name:social_share":"share","event_name:remove_from_cart":"remove_from_cart","event_name:select_item":"select_item","view_item:product":"view_item","ga_event_action:add_to_cart":"add_to_cart","ga_event_action:select_content":"select_content","ga_event_action:login_ok":"login","ga_event_action:registration_ok":"sign_up","ga_event_action:search_inline":"search","ga_event_action:my_location":"my_location","ga_event_action:search_location":"search_location","ga_event_action:add_to_wishlist":"add_to_wishlist","ga_event_action":"event.event_action","ga_event_category":"event.event_category","ga_event_category:Outbound Links":"outbound_links","ga_event_label":"event.event_label","dom.title":"config.page_title","page_language":"config.language","ga_content_type":"content_type","ga_allow_google_signals":"config.allow_google_signals,config.allow_ad_personalization_signals","user_id":"set.user_properties.user_identification_code","cp.ga4_client_id":"set.user_properties.client_id","page_section":"event.page_section","page_store_old":"event.page_store_old","page_name":"event.page_name","page_type":"event.page_type","page_store":"event.page_store","product_sku":"event.product_sku","ecomm_totalvalue":"event.ecomm_totalvalue","customer":"set.user_properties.customer_type","js_page.navigator.userAgent":"event.userAgent","login_status":"event.login_status","shipment_name":"event.shipment_name","payment_name":"event.payment_name","order_currency":"event.order_currency","session_id":"event.session_id_param","timestamp":"event.timestamp","product_category":"event.product_category","search_keyword":"event.search_keyword","search_result":"event.search_result","globalDeliveryTargetHideCheckout":"event.global_delivery","country_long":"event.country_long","product_sale_percentage":"product_sale_percentage","product_shoppable":"product_shoppable","product_availability":"product_availability","product_preorder":"product_preorder","product_markdown":"product_markdown","ga_cd25":"event.list_filter","ga_metric1":"event.m_login_ok","ga_metric2":"event.m_registration_ok","ga_metric5":"event.m_add_to_wishlist","ga_metric6":"event.m_social_share","ga_metric7":"event.m_filter","ga_p_metric8":"event.m_size_select","ga_p_metric9":"event.m_color_select","ga_p_metric10":"event.m_image_view","ga_p_metric11":"event.m_find_in_store","ga_metric12":"event.m_mail_send","ga_metric13":"event.m_search_inline","ga_metric14":"event.m_store_locator_phone","ga_metric15":"event.m_store_locator_direction","ga_metric16":"event.m_pay_now","ga_metric26":"m_pdp_product_availability","ga_metric27":"m_pdp_product_soldout","ga_metric28":"m_pdp_product_sale","ga_metric29":"m_pdp_product_notshoppable","product_sale":"product_sale","product_personalized_typ":"product_personalized_typ","ga4_location":"config.page_location","ga4_tracking_id":"measurement_id","impression_list_name":"view_item_list.item_list_name","ga4_list_name":"product_item_list_name","ga_non_interaction":"event.non_interaction","store_collection":"event.store_collection","store_department":"event.store_department","store_category":"event.store_category","ga_metric30":"event.m_plp","campaign_ga":"event.custom_campaign_name","campaign_content":"event.custom_campaign_content","campaign_medium":"event.custom_campaign_medium","campaign_source":"event.custom_campaign_source","view_item_list:view_item_list":"view_item_list","ga_user_agent_first":"event.UA_first100characters","ga_user_agent_last":"event.UA_second100characters","qp.CRMID":"event.emarsys_crm_id_event_scope,set.user_properties.emarsys_crm_id_user_scope","qp.emarsysID":"event.emarsys_id_event_scope,set.user_properties.emarsys_id_user_scope"};u.extend=[];u.send=function(utag_event,data_layer){if(u.ev[utag_event]||u.ev.all!==undefined){utag.DB("send:47");utag.DB(data_layer);var a,b,c,d,i,j,has_purchase=false,prop;a=utag_event;b=data_layer;u.data={"base_url":"https://www.googletagmanager.com/gtag/js?id=##utag_measurement_id##","measurement_id":"G-YR1Q6D8B6F","clear_global_vars":"true","data_layer_name":"","send_page_view":"false","order_id":"","order_total":"","order_subtotal":"","order_shipping":"","order_tax":"","order_store":"","order_currency":"","order_coupon_code":"","product_id":[],"product_name":[],"product_brand":[],"product_category":[],"product_quantity":[],"product_unit_price":[],"product_discount":[],"product_coupon":[],"product_variant":[],"product_promotion_id":[],"product_promotion_name":[],"product_creative_name":[],"product_creative_slot":[],"product_location_id":[],"product_index":[],"product_item_list_name":[],"product_item_list_id":[],"product_affiliation":[],"event_queue":[],"config":{},"set":{"developer_id.dYmQxMT":true,"user_properties":{}},"event":{},"items":[],"product_sale_percentage":[],"product_shoppable":[],"product_availability":[],"product_preorder":[],"product_markdown":[],"product_sale":[],"product_personalized_typ":[],"m_pdp_product_availability":null,"m_pdp_product_soldout":null,"m_pdp_product_sale":null,"m_pdp_product_notshoppable":null};utag.DB("send:47:EXTENSIONS");utag.DB(data_layer);for(var mapping_key in utag.loader.GV(u.map)){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==""){var destinations=u.map[mapping_key].split(",");for(i=0;i<destinations.length;i++){mapFunc(destinations[i].split("."),u.data,data_layer[mapping_key]);}}else{var event_destinations=mapping_key.split(":");if(event_destinations.length===2&&data_layer[event_destinations[0]]===event_destinations[1]){if(u.map[mapping_key]){u.data.event_queue=u.data.event_queue.concat(u.map[mapping_key].split(","));}}}}
utag.DB("send:47:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||data_layer._corder||"";u.data.order_total=u.data.order_total||data_layer._ctotal||"";u.data.order_shipping=u.data.order_shipping||data_layer._cship||"";u.data.order_tax=u.data.order_tax||data_layer._ctax||"";u.data.order_store=u.data.order_store||data_layer._cstore||"";u.data.order_currency=u.data.order_currency||data_layer._ccurrency||"";u.data.order_coupon_code=u.data.order_coupon_code||data_layer._cpromo||"";u.data.customer_id=u.data.customer_id||data_layer._ccustid||"";u.data.customer_city=u.data.customer_city||data_layer._ccity||"";u.data.customer_state=u.data.customer_state||data_layer._cstate||"";u.data.customer_zip=u.data.customer_zip||data_layer._czip||"";u.data.customer_country=u.data.customer_country||data_layer._ccountry||"";if(u.data.product_id.length===0&&data_layer._cprod!==undefined){u.data.product_id=data_layer._cprod.slice(0);}
if(u.data.product_name.length===0&&data_layer._cprodname!==undefined){u.data.product_name=data_layer._cprodname.slice(0);}
if(u.data.product_brand.length===0&&data_layer._cbrand!==undefined){u.data.product_brand=data_layer._cbrand.slice(0);}
if(u.data.product_category.length===0&&data_layer._ccat!==undefined){u.data.product_category=data_layer._ccat.slice(0);}
if(u.data.product_quantity.length===0&&data_layer._cquan!==undefined){u.data.product_quantity=data_layer._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&data_layer._cprice!==undefined){u.data.product_unit_price=data_layer._cprice.slice(0);}
if(u.data.product_discount.length===0&&data_layer._cpdisc!==undefined){u.data.product_discount=data_layer._cpdisc.slice(0);}
if(utag.ut.typeOf(u.data.measurement_id)==="string"&&u.data.measurement_id!==""){u.data.measurement_id=u.data.measurement_id.replace(/\s/g,"").split(",");}
if(!u.data.measurement_id){utag.DB(u.id+": Tag not fired: Required attribute measurement_id not populated");return;}
if(u.data.gtag_enable_tcf_support){window["gtag_enable_tcf_support"]=toBoolean(u.data.gtag_enable_tcf_support);}
u.data.event.send_to=u.data.event.send_to||u.data.measurement_id;if(u.data.customer_id){}
u.data.config.user_id="";if(toBoolean(u.data.clear_global_vars)){setGlobalProperties(u.data.config,true);for(prop in utag.loader.GV(u.data.set)){if(prop!=="developer_id.dYmQxMT"){setGlobalProperties(u.data.set,true,prop);}}}
setGlobalProperties(u.data.config,false);setGlobalProperties(u.data.set,false);if(!u.initialized){if(!toBoolean(u.data.send_page_view)){u.data.config.send_page_view=false;}}else{u.data.config.send_page_view=false;}
for(i=0;i<u.data.measurement_id.length;i++){if(!/^[a-zA-Z]{1}-|^[a-zA-Z]{2}-/.test(u.data.measurement_id[i])){u.data.measurement_id[i]="G-"+u.data.measurement_id[i];}
u.o("config",u.data.measurement_id[i],u.data.config);}
u.initialized=true;for(i=0;i<u.data.event_queue.length;i++){if(u.data.event_queue[i]==="purchase"||u.data.event_queue[i]==="refund"){has_purchase=true;}}
if(u.data.order_id&&!has_purchase){u.data.event_queue.push("purchase");}
for(i=0;i<u.data.event_queue.length;i++){var event_name=u.data.event_queue[i];var event_data={};if(event_name=="newsletter_light"){u.data.event.m_newsletter_light=1;}
else if(event_name=="newsletter_complete"){u.data.event.m_newsletter_complete=1;}
else if(event_name=="view_cart"){u.data.event.m_view_cart=1;}
else if(event_name=="view_item"||(event_name=="select_content"&&u.data.event.event_label=="color_select")||(event_name=="select_content"&&u.data.event.event_label=="size_select")){u.data.event.m_pdp_total_view=1;u.data.event.m_pdp_product_availability=u.data.m_pdp_product_availability;u.data.event.m_pdp_product_soldout=u.data.m_pdp_product_soldout;u.data.event.m_pdp_product_sale=u.data.m_pdp_product_sale;u.data.event.m_pdp_product_notshoppable=u.data.m_pdp_product_notshoppable;}
else if(event_name=="view_item_list"){u.data.product_id=pageViewData.product_impression_sku;u.data.product_category=pageViewData.product_impression_category;u.data.product_unit_price=pageViewData.product_impression_price;u.data.product_index=pageViewData.product_impression_position;}
event_data=JSON.parse(JSON.stringify(u.data.event));if(u.data.event.non_interaction){u.data.event.non_interaction=true;}
if(u.event_map[event_name]){for(j=0;j<u.event_map[event_name].length;j++){var event_param=u.event_map[event_name][j];var event_param_value=u.std_params[event_param]?u.std_params[event_param](event_name):u.data[event_param]||"";if(event_param_value!==""){event_data[event_param]=event_param_value;}}}
u.o("event",event_name,event_data);}
if(!hasgtagjs()){u.scriptrequested=true;utag.ut.gtagScriptRequested=true;u.data.base_url=u.data.base_url.replace("##utag_measurement_id##",u.data.measurement_id[0]);utag.ut.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":"utag_47","attrs":{}});}
utag.DB("send:47:COMPLETE");}};function mapFunc(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){mapFunc(arr,obj[i],item);}else{obj[i]=item;}}
function toBoolean(val){val=val||"";return val===true||val.toLowerCase()==="true"||val.toLowerCase()==="on";}
function hasgtagjs(){window.gtagRename=window.gtagRename||""||"gtag";if(utag.ut.gtagScriptRequested){return true;}
var i,s=document.getElementsByTagName("script");for(i=0;i<s.length;i++){if(s[i].src&&s[i].src.indexOf("gtag/js")>=0&&(s[i].id&&s[i].id.indexOf("utag")>-1)){return true;}}
var data_layer_name=""||"dataLayer";window[data_layer_name]=window[data_layer_name]||[];if(typeof window[window.gtagRename]!=="function"){window[window.gtagRename]=function(){window[data_layer_name].push(arguments);};var cross_track=toBoolean(""),cross_track_domains="";if(cross_track&&cross_track_domains!==""){window[window.gtagRename]("set","linker",{domains:cross_track_domains.split(","),accept_incoming:true});}
window[window.gtagRename]("js",new Date());}
return false;}
u.scriptrequested=hasgtagjs();u.initialized=false;u.o=window[window.gtagRename];function setGlobalProperties(data,reset,custom_property){var map={"user_id":{"name":"user_id","type":"exists","reset":true},"page_path":{"name":"page_path","type":"exists","reset":true},"page_title":{"name":"page_title","type":"exists","reset":true},"page_location":{"name":"page_location","type":"exists","reset":false},"developer_id.dYmQxMT":{"name":"developer_id.dYmQxMT","type":"exists","reset":false},"user_properties":{"name":"user_properties","type":"object","reset":true}},prop,subProp,g={};if(custom_property&&reset){g[custom_property]="";}
for(prop in utag.loader.GV(map)){if(reset&&map[prop].reset){if(map[prop].name==="user_properties"){for(subProp in data[prop]){if(!g[map[prop].name]){g[map[prop].name]={};}
g[map[prop].name][subProp]="";}}else{g[map[prop].name]="";}}else{if(map[prop].type==="bool"){if(data[prop]==true||data[prop]==="true"){g[map[prop].name]=true;}}
else if(map[prop].type==="exists"||map[prop].type==="object"){if(data[prop]){g[map[prop].name]=data[prop];}}}}
if(!utag.ut.isEmptyObject(g)){u.o("set",g);}}
function getItems(length){var g={},i,items=[];length=length||u.data.product_id.length||u.data.product_name.length;for(i=0;i<length;i++){g={};g.item_id=u.data.product_id[i];if(u.data.product_name[i]){g.item_name=u.data.product_name[i];}
if(u.data.product_coupon[i]){g.coupon=u.data.product_coupon[i];}
if(u.data.product_discount[i]){g.discount=u.data.product_discount[i];}
if(u.data.product_affiliation[i]){g.affiliation=u.data.product_affiliation[i];}
if(u.data.product_brand[i]){g.item_brand=u.data.product_brand[i];}
if(u.data.product_category[i]){g.item_category=u.data.product_category[i];}
if(u.data.product_variant[i]){g.item_variant=u.data.product_variant[i];}
if(u.data.product_unit_price[i]){g.price=u.data.product_unit_price[i];}
if(u.data.order_currency){g.currency=u.data.order_currency;}
if(u.data.product_quantity[i]){g.quantity=u.data.product_quantity[i];}
if(u.data.product_promotion_id[i]){g.promotion_id=u.data.product_promotion_id[i];}
if(u.data.product_promotion_name[i]){g.promotion_name=u.data.product_promotion_name[i];}
if(u.data.product_creative_name[i]){g.creative_name=u.data.product_creative_name[i];}
if(u.data.product_creative_slot[i]){g.creative_slot=u.data.product_creative_slot[i];}
if(u.data.product_location_id[i]){g.location_id=u.data.product_location_id[i];}
if(u.data.product_index[i]){g.index=u.data.product_index[i];}
if(u.data.product_item_list_name[i]){g.item_list_name=u.data.product_item_list_name[i];}
if(u.data.product_item_list_id[i]){g.item_list_id=u.data.product_item_list_id[i];}
if(u.data.product_sale_percentage[i]){g.product_sale_percentage=u.data.product_sale_percentage[i];}
if(u.data.product_shoppable[i]){g.product_shoppable=u.data.product_shoppable[i];}
if(u.data.product_availability[i]){g.product_availability=u.data.product_availability[i];}
if(u.data.product_preorder[i]){g.product_preorder=u.data.product_preorder[i];}
if(u.data.product_sale[i]){g.product_sale=u.data.product_sale[i];}
if(u.data.product_markdown[i]){g.product_markdown=u.data.product_markdown[i];}
if(u.data.product_personalized_typ[i]){g.product_personalized_typ=u.data.product_personalized_typ[i];}
items.push(g);}
return items;}
u.event_map={add_payment_info:["coupon","currency","items","payment_type","value"],add_shipping_info:["coupon","currency","items","shipping_tier","value"],add_to_cart:["currency","items","value"],add_to_wishlist:["currency","items","value"],begin_checkout:["coupon","currency","items","value"],earn_virtual_currency:["virtual_currency_name","value"],generate_lead:["currency","value"],join_group:["group_id"],level_end:["level_name","success"],level_start:["level_name"],level_up:["level","character"],login:["method"],post_score:["score","level","character"],purchase:["affiliation","coupon","currency","items","transaction_id","shipping","tax","value"],refund:["affiliation","coupon","currency","items","transaction_id","shipping","tax","value"],remove_from_cart:["currency","items","value"],search:["search_term"],select_content:["content_type","item_id"],select_item:["items","item_list_name","item_list_id"],select_promotion:["items","location_id"],share:["method","content_type","content_id"],sign_up:["method"],spend_virtual_currency:["item_name","virtual_currency_name","value"],tutorial_begin:[],tutorial_complete:[],unlock_achievement:["achievement_id"],view_cart:["currency","items","value"],view_item:["currency","items","value"],view_item_list:["items","item_list_name","item_list_id"],view_promotion:["items","location_id"],exception:["description","fatal"],screen_view:["screen_name"]};u.std_params={"transaction_id":function(){return u.data.order_id;},"affiliation":function(){return u.data.order_store;},"value":function(event){if(event.match(/timing_complete|virtual_currency/i)){return u.data.value;}
return u.data.order_total;},"currency":function(){return u.data.order_currency;},"tax":function(){return u.data.order_tax;},"shipping":function(){return u.data.order_shipping;},"coupon":function(){return u.data.order_coupon_code;},"fatal":function(){return toBoolean(u.data.fatal);},"items":function(event){if(event=="view_item"||event=="select_content"){return getItems(1);}
return getItems();},"item_id":function(){return u.data.product_id[0]?u.data.product_id[0]:"";}};utag.o[loader].loader.LOAD(id);}("47","versace.main"));}catch(error){utag.DB(error);}
